<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script type="text/javascript" charset="utf-8">
// https://tieba.baidu.com/p/6045315041
const arr = [
  'https://img-bcy-qn.pstatp.com/user/604058/item/web/17b78/bb309350cdbc11ea923d2182e06de7ba.jpg',
  'https://img-bcy-qn.pstatp.com/user/604058/item/web/17b78/af2d9fd0cdbc11ea923d2182e06de7ba.jpg',
  'https://img-bcy-qn.pstatp.com/user/604058/item/web/17b78/b3fdc580cdbc11ea923d2182e06de7ba.jpg',
  'https://img-bcy-qn.pstatp.com/user/604058/item/web/17b78/b5ca6f30cdbc11ea923d2182e06de7ba.jpg',
  'https://img-bcy-qn.pstatp.com/user/604058/item/web/17b78/b787d6a0cdbc11ea923d2182e06de7ba.jpg',
  'https://img-bcy-qn.pstatp.com/user/604058/item/web/17b78/b96f5b50cdbc11ea923d2182e06de7ba.jpg',
  'https://img-bcy-qn.pstatp.com/user/604058/item/web/17b78/bcf6fb70cdbc11ea923d2182e06de7ba.jpg'
]

// 下载函数
// const download = (link)=> {
//   const el = getLinkNodeElement()
//   el.setAttribute('download', '')
//   el.setAttribute('href', link)
//   const t = document.createTextNode('123')
//   el.appendChild(t)
//   // triggerClick(el)
// }

// 创建 a 链接
// const getLinkNodeElement = () => {
//   const className = 'node-download'
//   const el = document.createElement('a')
//   el.setAttribute('class', className)
//   el.setAttribute('target', '_blank')
//   el.setAttribute('rel', 'noopener')
//   document.body.appendChild(el)
//   // let el = document.querySelectorAll('.className')
//   // if (!el) {
//   //   el = document.createElement('a')
//   //   el.setAttribute('id', id)
//   //   el.setAttribute('target', '_blank')
//   //   el.setAttribute('rel', 'noopener')
//   //   document.body.appendChild(el)
//   // }
//   return el
// }
//
// // 模拟点击 a 链接
// const triggerClick = (node) => {
//   // try {
//   //   if (document.createEvent) {
//   //     const evt = document.createEvent('MouseEvents')
//   //     evt.initEvent('click', true, false)
//   //     node.dispatchEvent(evt)
//   //   } else if (document.createEventObject) {
//   //     node.fireEvent('onclick')
//   //   }
//   // } catch (e) {
//   //   node.click()
//   // }
//    node.click()
// }

//

const download = (url) => {
  const x = new XMLHttpRequest();
  x.open("GET", url, true);
  x.responseType = 'blob';
  x.onload = function (e) {
    const url = window.URL.createObjectURL(x.response)
    const a = document.createElement('a');
    a.href = url
    a.download = ''
    a.click()
  }
  x.send();
}

// 获取地址，遍历，批量下载
const downloadPic = async () => {
  arr.forEach(url => {
    download(url)   // 遍历下载每个url
  })
}
downloadPic()
</script>
</body>
</html>
