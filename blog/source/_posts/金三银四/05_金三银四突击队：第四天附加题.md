---
title: "金三银四突击队：第四天附加题"
date: 2021-02-26 08:38:59
tags:
  - 面试
  - 金三银四
---

<!--banner-pic|sticker|content-img|content-img-half-->

### 第一题

> 说一下React Hooks在平时开发中需要注意的问题和原因?

1. 不要在循环、条件判断、嵌套的函数中条用hook，必须始终在react函数的顶层使用hook。因为react需要利用调用顺序来正确更新相应的状态，以及调用相应的钩子函数，一旦在循环、条件分支中调用hook，容易导致调用顺序不一致，产生难以预料的后果。
2. 使用useState时，使用push、pop等直接更改数组无法获取到新的值。
3. useState设置装填时，只有第一次生效，后期需要更新状态，必须通过useEffect。
4. useContext可以让隔代组件间通信，但是不应滥用，最好基于useContext进行封装，形成统一的状态管理工具。

### 第二题

> React 的 setState 方法是异步还是同步？

setState本身是同步的方法，因为考虑多次调用渲染机制影响性能，所以react将多次的setState合并执行，形成异步的状态。

如果想要获得更新状态后的值，可以在setState第二个参数中传入一个回调函数来获取。

公布的答案：

### 1.

1. 只能在React函数中使用（函数式组件或自定义hook）。
2. 只能在函数最外层调用hook，不能包含在if，for等语句中，或者子函数中。
3. useState中存储的是引用类型数据，修改state时，一定要返回新的引用。

因为： 
1. hooks转为函数足迹爱你的逻辑复用而设计，所以只能用在函数式组件和自定义hooks中。
2. hooks在调用的时候，需要确保先后调用顺序，一个顺序出问题，会导致整个程序的混乱。
3. 如果在useState中存储的是引用各类型，更新时不更新引用地址的话，react会认为我们没有更新数据，则不进行组件更新。

### 2.

setState在React方法中后者React事件中是异步的，但是在原生事件，或者异步程序中是同步的。
